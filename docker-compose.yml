version: '3.8'

services:
  consul:
    image: consul:1.15.4
    container_name: consul
    networks:
      - net
    ports:
      - "8500:8500"


  city-management-service:
    build: ./CityManagementService
    container_name: city_management_service
    ports:
      - "8080:8080" # Перенаправление HTTP
      - "8181:8181" # Перенаправление HTTPS
      - "4848:4848" # Административная консоль
    depends_on:
      - consul
    networks:
      - net

  route-calculation-service:
    build: ./RouteCalculationService
    container_name: route_calculation_service
    ports:
      - "8081:8080" # Перенаправление HTTP
      - "8182:8181" # Перенаправление HTTPS
      - "4849:4848" # Административная консоль
    depends_on:
      - consul
    networks:
      - net


networks:
  net: